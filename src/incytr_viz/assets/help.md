
### Incytr Visualization Tool
The purpose of this tool is to interact with outputs generated by the Incytr pathway discovery tool (citation).

Use:

```incytr-viz --pathways path/to/pathways/file --clusters /path/to/clusters/file```


The left and right sides of the tool correspond to pathway data for the two input conditions, as indicated in the cell populations input file. There are two main types of visualizations:

1. A directed graph showing an overview of the number of pathways occurring between cell populations
2. A river (or Sankey) diagram showing a detailed breakdown of pathway components

### Input format

### Filtering

Pathways must pass all of the currently applied filters in order to be displayed. Except for UMAP-based filtering (see below), filters always apply to both conditions. The sliding filters change cutoffs for various metrics applying to that pathway. Some metrics are condition-specific (e.g. SigProb), and each condition will be filtered according to its own value for that metric, independently of the other condition. 

The remaining filters allow you to filter on various pathway components. The kinase filter selects for pathways with a kinase-substrate relationship between components (Receptor --> EM, Receptor --> Target Gene, EM --> Target Gene)

### Interaction

There are a number of ways to interact with the visuals:

-- In the network view, click on an edge to switch to the river view, filtered on the sender and receiver cell populations corresponding to that edge
-- In the river view, click a pathway component to filter results




Downloading Data

Click "Download CSV" to download a CSV of pathways passing the current filters.

A zip archive with 3 files will be produced:

- CSV of pathways passing current filters for condition A
- CSV of pathways passing current filters for condition B
- YAML file with the parameters/filters that produced the above files


Troubleshooting and other tips

-- Targets may not be displayed when there are too many pathways passing the current filters. Please apply additional filters.
-- When downloading outputs, your browser may ask you to allow the app to download multiple files.
-- Some filters may be disabled if the metric is not detected or available.
-- "Address already in use" error: This likely means the gunicorn process was not terminated when a terminal was closed. This can happen when running a program from a code editor like VS Code
-- Large files (~1M pathways) may take slightly longer to filter. 
-- Warning! Dash cytoscape > 0.3.0 (e.g. 1.0.0 and above) have bugs that affect graph updates as of July 2024
